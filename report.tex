% arara: xelatex
% arara: biber
% arara: makeglossaries
% arara: xelatex
% arara: xelatex
\documentclass[paper=A4,DIV=calc]{scrbook}
\usepackage{amsmath}
%% FONTS (fold)
\usepackage{ifxetex}
\ifxetex
	\usepackage[no-math]{fontspec}
	\usepackage[oldstyle,tabular,semibold]{libertineotf}
	\usepackage[libertine,slantedGreek,liby,bigdelims]{newtxmath}
	\usepackage{polyglossia}
	\setmainlanguage{english}
	\setotherlanguage{swedish}
\else
	\usepackage[utf8]{inputenc}
	\usepackage[T1]{fontenc}
	\usepackage[oldstyle,tabular,semibold]{libertine}
	\usepackage[libertine,slantedGreek,liby,bigdelims]{newtxmath}
	\usepackage[swedish,english]{babel}
\fi
%% (end)
% [review] - title styles?
\usepackage[titles=false]{chs-msc-thesis}
\usepackage{csquotes}
\usepackage[algoruled,algochapter]{algorithm2e}
\usepackage{ntheorem}
\usepackage{mathtools}
\usepackage[authordate,backend=biber,firstinits=true,useprefix=true]{biblatex-chicago} % noibid?
\usepackage[toc,acronym,nomain]{glossaries}
\usepackage{hyperref}
\usepackage{cleveref}

\let\C\undefined
\usepackage[commonsets]{skmath}
\input{fixes.tex}
\input{macros.tex}

\makeglossaries
\input{acronyms.tex}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\theoremstyle{definition}
\newtheorem{definition}{Definition}
%\newtheorem{example}{Example}

\DontPrintSemicolon

\makeatletter
% equivalent to dashed=false in standard biblatex styles
\AtEveryBibitem{\global\undef\bbx@lasthash}
% fixes the "strange" (apparently normal) order of names in author list
\DeclareNameAlias{sortname}{last-first}
% fixes doi formatting
\DeclareFieldFormat*{doi}{\textsc{doi}\addcolon\space\textsc{#1}}
\makeatother
\ExplSyntaxOn
% circumvents lack of italic small-caps by redefining title styles
\iffalse
\cs_if_exist_use:NT\addtokomafont{{section}{\sffamily}}
\cs_if_exist_use:NT\addtokomafont{{subsection}{\sffamily\normalsize}}
\titleformat{\subsection}[hang]{
	\__unless_usekomafont:n{\large}
	\__maybe_usekomafont:n{subsection}
}{\llap{\thesubsection\hspace{1ex}}}{0pt}{{#1}}[\vspace{-.5\baselineskip}]
\cs_if_exist_use:NT\addtokomafont{{subsubsection}{\sffamily}}
\titleformat{\subsubsection}[hang]{
	\__maybe_usekomafont:n{subsubsection}
}{\llap{\thesubsubsection\hspace{1ex}}}{0pt}{\textit{#1}}[\vspace{-.5\baselineskip}]
\fi
\ExplSyntaxOff

\SetupMetadata{
	% Required metadata
	title = {Solving max-sum problems with the in-the-middle heuristic},
	author = {Simon Sigurdhsson},
	year = {2014},
	subject = {Engineering Mathematics},
	department = {Department of Computer Science and Engineering},
	keywords = {?},
	abstract = {?},
	% Optional metadata
	%issn = {},
	%subtitle = {},
	%publisher = {},
	series = {2014:?},
	%cover-caption = {Bildtext till framsidebilden},
	%cover-image = {\includegraphics{...}}
}

\addbibresource{references.bib}

\begin{document}
	\frontmatter
	\makefrontmatter

	\cleardoublepage
	\tableofcontents
	
	\mainmatter
	\chapter{Introduction}
	\section{Background}
	\section{Related work}
	\section{Methodology}

	\chapter{Theory}
	\input{theory.tex}
	\input{theory/lp.tex}
	\input{theory/csp.tex}
	\input{theory/algorithm.tex}

	\chapter{Implementation}
	\section{Data representation}
	\subsection{Input format: \textsc{wcsp}}
	\subsection{Internal storage}

	\chapter{Results}
	\section{Standard algorithm}
	\section{Specialized updates for ??? problems}

	\chapter{???}
	% [todo] - check how the algorithm exposes/utilizes the notions in Bordeaux08?

	\chapter{Conclusions}

	\nocite{*}
	% [review] - find published variants of unpublished works (incl. strange pubstates)
	\printglossary[type=\acronymtype,]
	\printbibliography[heading=bibintoc]
	%\printindex
	\backmatter
\end{document}
